---
name: amap-traffic
description: é«˜å¾·åœ°å›¾å®žæ—¶è·¯å†µæŸ¥è¯¢ä¸Žæœ€ä¼˜è‡ªé©¾è·¯çº¿è§„åˆ’æŠ€èƒ½ã€‚åŸºäºŽé«˜å¾·äº¤é€šæ€åŠ¿APIå’Œè·¯å¾„è§„åˆ’APIï¼Œæä¾›å®žæ—¶æ‹¥å µä¿¡æ¯å’Œæœ€å¿«è·¯çº¿å»ºè®®ã€‚
metadata: 
  {
    "openclaw": 
      { 
        "emoji": "ðŸš—", 
        "requires": { "env": ["AMAP_KEY"] }, 
        "primaryEnv": "AMAP_KEY",
        channels: ["webchat", "dingtalk", "qq"]
      },
  }
---

# é«˜å¾·å®žæ—¶è·¯å†µä¸Žè·¯çº¿è§„åˆ’

## æ¦‚è¿°
æœ¬æŠ€èƒ½é€šè¿‡é«˜å¾·åœ°å›¾APIå®žçŽ°ï¼š
1. **å®žæ—¶è·¯å†µæŸ¥è¯¢**ï¼šèŽ·å–æŒ‡å®šé“è·¯/åŒºåŸŸçš„æ‹¥å µçŠ¶æ€
2. **æ™ºèƒ½è·¯çº¿è§„åˆ’**ï¼šåŸºäºŽå®žæ—¶è·¯å†µè®¡ç®—æœ€å¿«è‡ªé©¾è·¯çº¿
3. **å¤šæ–¹æ¡ˆå¯¹æ¯”**ï¼šæä¾›æ—¶é—´ã€è·ç¦»ã€è´¹ç”¨ç­‰ç»´åº¦çš„è·¯çº¿æ¯”è¾ƒ

## ðŸ”‘ API Key é…ç½®
1. è®¿é—® [é«˜å¾·å¼€æ”¾å¹³å°](https://console.amap.com/) åˆ›å»º Key
2. åœ¨ OpenClaw Web é…ç½®é¡µé¢è®¾ç½®ï¼š  
   **åœ°å€**: http://127.0.0.1:18789/skills  
   **é…ç½®æ–‡ä»¶å­—æ®µ**: `skills.entries.amap-traffic.AMAP_KEY` in `openclaw.json`  
   **å€¼**: ä½ çš„é«˜å¾·API Key

> **æ³¨æ„**: æœ¬æŠ€èƒ½æ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šé‡æ–°è¯»å– `openclaw.json` ä¸­çš„æœ€æ–° `AMAP_KEY`ï¼Œæ”¯æŒå‰ç«¯åŠ¨æ€æ›´æ–°å¯†é’¥åŽç«‹å³ç”Ÿæ•ˆã€‚

## API ä½¿ç”¨è¯´æ˜Ž
### 1. å®žæ—¶è·¯å†µæŸ¥è¯¢
```bash
curl "https://restapi.amap.com/v3/traffic/status/road?roadid={é“è·¯ID}&key={åŠ¨æ€è¯»å–çš„AMAP_KEY}"
```

### 2. æ™ºèƒ½è·¯çº¿è§„åˆ’ï¼ˆå«å®žæ—¶è·¯å†µï¼‰
```bash
curl "https://restapi.amap.com/v3/direction/driving?origin={èµ·ç‚¹åæ ‡}&destination={ç»ˆç‚¹åæ ‡}&strategy=2&key={åŠ¨æ€è¯»å–çš„AMAP_KEY}"
```
- `strategy=2`ï¼šä¼˜å…ˆè€ƒè™‘å®žæ—¶è·¯å†µçš„æœ€å¿«è·¯çº¿

## è·¯å†µçŠ¶æ€è¯´æ˜Ž
- **ç•…é€š**ï¼šðŸŸ¢ ç»¿è‰²ï¼ˆé€Ÿåº¦ > 40km/hï¼‰
- **ç¼“è¡Œ**ï¼šðŸŸ¡ é»„è‰²ï¼ˆ20-40km/hï¼‰
- **æ‹¥å µ**ï¼šðŸ”´ çº¢è‰²ï¼ˆ< 20km/hï¼‰
- **ä¸¥é‡æ‹¥å µ**ï¼šðŸŸ£ ç´«çº¢è‰²ï¼ˆ< 10km/hï¼‰

## èµ„æº

### scripts/
åŒ…å«é«˜å¾·å®žæ—¶è·¯å†µæŸ¥è¯¢å’Œè·¯çº¿è§„åˆ’çš„æ ¸å¿ƒè„šæœ¬ã€‚

#### scripts/amap_traffic.py
Python è„šæœ¬ï¼Œå®žçŽ°å®Œæ•´çš„å®žæ—¶è·¯å†µæŸ¥è¯¢å’Œæœ€ä¼˜è·¯çº¿è§„åˆ’åŠŸèƒ½ã€‚
**æ¯æ¬¡æ‰§è¡Œæ—¶éƒ½ä¼šä»Ž `/home/admin/.openclaw/openclaw.json` è¯»å–æœ€æ–°çš„ AMAP_KEY**ï¼Œ
ç¡®ä¿å‰ç«¯åŠ¨æ€æ›´æ–°å¯†é’¥åŽç«‹å³ç”Ÿæ•ˆã€‚